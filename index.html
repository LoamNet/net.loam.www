<!DOCTYPE html>
<html>
	<head>
		<!-- Metadata -->
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Loam LLC publishes, develops, and helps with the development of apps, games, art, and other digital media and software! We work with both solo and collaborative indie ventures for everything from resource management resources to publishing and more!">
		<meta name="keywords" content="app, apps, loam, indie, applications, software, publishing, indie publishing, indie apps, mobile, desktop">
		<meta name="author" content="Matthew Cech">

		<!-- Page Setup -->
		<title>Loam - Indie, Apps, & More</title>
		<link rel="shortcut icon" href="/assets/favicon.ico" />

		<!-- Style, Bootstrap, etc -->
		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Comfortaa&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="/assets/styleColors.css">
		<link rel="stylesheet" type="text/css" href="/assets/styleGlobal.css">
		<link rel="stylesheet" type="text/css" href="/assets/styleLanding.css">
	</head>



	<body>
		<!-- Title and nav links -->
		<nav class="navbar navbar-expand-lg navbar-light loam-nav-container">
			<a class="navbar-brand" href="#"><h1>Loam</h1></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="loam-nav-visuals loam-color-brown-s0">
					<i class="fas fa-bars"></i>
					<i class="fas fa-times collapse navbarSupportedContent"></i>
				</span>
			</button>

			<div class="collapse navbar-collapse navbarSupportedContent">
				<ul class="navbar-nav">
					<a class="nav-item nav-link active" href="/apps"><h2>Apps</h2></a>
					<!--a class="nav-item nav-link" href="/games"><h2>Games</h2></a-->
					<a class="nav-item nav-link" href="/resources"><h2>Resources</h2></a>
					<a class="nav-item nav-link" href="/services"><h2>Services</h2></a>
					<a class="nav-item nav-link" href="/contact"><h2>Contact</h2></a>
				</ul>
			</div>
		</nav>


		<!-- Social links -->
		<div class="loam-links">
			<a class="btn btn-outline-dark loam-social" href="https://twitter.com/LoamApp"><i class="fab fa-twitter"></i></a>
			<a class="btn btn-outline-dark loam-social" href="https://www.youtube.com/channel/UCaW8h6bNrs3VgLV7w2OyDaQ?view_as=subscriber"><i class="fab fa-youtube"></i></a>
		</div>


		<!-- Mask 'Loam' -->
		<div id="maskitem" class="loam-relative" data-toggle="collapse" data-target=".navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" width="100%" style="display: none;">
			<svg class="loam-svg">
				<mask id="maskLayer">
					<rect width="100%" height="100%" fill="#fff"></rect>
					<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" id="maskText">Loam</text>
				</mask>

				<rect id="masked" width="100%" height="100%" fill="#f8f8f8"></rect>
			</svg>

			<span id="bgvideo"><video muted autoplay loop class="loam-background-video" src="assets/bg-island-360.mp4"></video></span>
		</div>


		<!-- bootstrap, jquery, and scripts for loading -->		
		<script src="/assets/jquery-3.4.1.min.js"></script>
		<script src="/assets/bootstrap.bundle.min.js"></script>		
		<script type="text/javascript">

		// Variables
		let isFirstRun = true;
		let transitionDelay = 500;
		let lastElementIndex = -1;
		let videoElement = document.getElementById('bgvideo');
		let videoCycleTime = 10000;
		let elements = [
			"bg-island-360.mp4",
			"bg-water-360.mp4",
			"bg-leaves-360.mp4",
			"bg-waves-360.mp4",
			"bg-tree-360.mp4"
		];

		// Chooses a random value between 0 and max.
		function rand(max) {
			return Math.floor(Math.random() * Math.floor(max));
		}

		// Randomly chooses a new video to play
		function setRandomVideo() {
			let fadeDelay = transitionDelay;

			$("#maskitem").fadeOut(fadeDelay, ()=>{
				// Get random index that isn't the last
				let index = rand(elements.length);
				while(index == lastElementIndex) {
					index = rand(elements.length);
				}

				// Set and fade in new video
				displayVideoAtIndex(index, fadeDelay)
			});
		}

		// Displays the video at the specified index, and fades it in over time. If no
		// fade time is specified, the default is used.
		function displayVideoAtIndex(index, fadeTime) {
			lastElementIndex = index;
			videoElement.innerHTML = `<video muted autoplay loop class="loam-background-video" src="assets/${elements[index]}"></video>`;

			if(fadeTime == null) {
				fadeTime = transitionDelay;
			}

			$("#maskitem").fadeIn(fadeTime);
		}

		// Initial setup
		displayVideoAtIndex(0, 0);
		window.setInterval(setRandomVideo, videoCycleTime);
		</script>
	</body>
</html>